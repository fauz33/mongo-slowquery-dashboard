{% extends "base.html" %}

{% block title %}Dashboard (v2) - MongoDB Log Analyzer{% endblock %}

{% block content %}
<div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
    <h1 class="h2"><i class="fas fa-tachometer-alt me-2"></i>Dashboard (v2)</h1>
</div>

<div class="row g-3 mb-4" id="dashboard-cards">
    <div class="col-md-3">
        <div class="card text-center">
            <div class="card-body">
                <h6 class="text-muted">Slow Queries</h6>
                <h3 id="card-slow-queries">-</h3>
            </div>
        </div>
    </div>
    <div class="col-md-3">
        <div class="card text-center">
            <div class="card-body">
                <h6 class="text-muted">Namespaces</h6>
                <h3 id="card-namespaces">-</h3>
            </div>
        </div>
    </div>
    <div class="col-md-3">
        <div class="card text-center">
            <div class="card-body">
                <h6 class="text-muted">Connections</h6>
                <h3 id="card-connections">-</h3>
            </div>
        </div>
    </div>
    <div class="col-md-3">
        <div class="card text-center">
            <div class="card-body">
                <h6 class="text-muted">Auth Events</h6>
                <h3 id="card-auth">-</h3>
            </div>
        </div>
    </div>
</div>

<div class="row g-3">
    <div class="col-lg-6">
        <div class="card mb-3">
            <div class="card-header d-flex justify-content-between align-items-center">
                <span>Top Namespaces</span>
                <span class="badge bg-secondary" id="top-namespaces-count">0</span>
            </div>
            <div class="card-body" id="top-namespaces">
                <p class="text-muted">Loading...</p>
            </div>
        </div>
    </div>
    <div class="col-lg-6">
        <div class="card mb-3">
            <div class="card-header d-flex justify-content-between align-items-center">
                <span>Top Patterns</span>
                <span class="badge bg-secondary" id="top-patterns-count">0</span>
            </div>
            <div class="card-body" id="top-patterns">
                <p class="text-muted">Loading...</p>
            </div>
        </div>
        <div class="card mb-3">
            <div class="card-header">Recent Authentications</div>
            <div class="card-body" id="recent-auth">
                <p class="text-muted">Loading...</p>
            </div>
        </div>
    </div>
</div>

<script src="{{ url_for('static', filename='js/dashboard_v2.js') }}"></script>
{% endblock %}
